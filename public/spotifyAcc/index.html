<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" type="image/ico" href="https://michaelzhangwebsite.herokuapp.com/sFavicon.png">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-167496422-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
      
      gtag('config', 'UA-167496422-1');
    </script>
    <link href='https://fonts.googleapis.com/css?family=Cabin' rel='stylesheet'>

    <title id="documentTitle">Your Wrapped for Cracked Spotify</title>
  </head>
  <body>
    <font style="font-family: 'Cabin';">
      <center>
        <h1></h1>
        <br><br>
      </center>
    </font>
    <style>
      #time{
        font-size:22px;
      }
      #disc{
        font-size:14px;
        opacity:50%;
      }
    </style>
    <script src="https://code.jquery.com/jquery-2.1.0.js"></script>
    <script src="https://michaelzhangwebsite.herokuapp.com/switchHTTPS.js"></script>
    <script>
      //callback's first arg: error, second arg: repsonseText (body)
      var getRequest = (path,callback) => {
        var req = new XMLHttpRequest();
        req.open("GET",path);
        req.send();
        req.addEventListener("readystatechange", ()=>{
          if (req.status === 200 && req.readyState === 4) {
            var arr = JSON.parse(req.responseText);
            callback(undefined, arr); //undefined is basically null which means nothing
          } else if (req.readyState === 4){
            console.log("REEEEEEEEEEe", undefined)
            callback(req.responseText, undefined)
          }
        })
      }
      var accs = {} 
      var getAccs = getRequest("/accounts",function(error,body){
        if (error){
          console.log("reeeeeeee err: "+error)
        }else{
          accs=body.accs;
        }
      })
    </script>
  </body>
</html>
